<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.text.Text?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="controllers.AdminDashboardController"
            prefHeight="600.0" prefWidth="800.0">
    
    <top>
        <VBox>
            <MenuBar>
                <Menu text="Fichier">
                    <MenuItem text="Déconnexion" onAction="#handleLogout"/>
                    <SeparatorMenuItem />
                    <MenuItem text="Quitter" onAction="#handleExit"/>
                </Menu>
                <Menu text="Utilisateurs">
                    <MenuItem text="Gérer les utilisateurs" onAction="#handleManageUsers"/>
                </Menu>
                <Menu text="Événements">
                    <MenuItem text="Gérer les événements" onAction="#handleManageEvents"/>
                </Menu>
            </MenuBar>
            
            <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: #f0f0f0; -fx-padding: 10px;">
                <Text text="Tableau de bord administrateur" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
                <Pane HBox.hgrow="ALWAYS" />
                <Text fx:id="userInfoText" text="Connecté en tant que: Admin" />
            </HBox>
        </VBox>
    </top>
    
    <center>
        <TabPane tabClosingPolicy="UNAVAILABLE">
            <Tab text="Résumé">
                <VBox spacing="20" alignment="CENTER">
                    <padding>
                        <Insets top="20" right="20" bottom="20" left="20"/>
                    </padding>
                    
                    <Text text="Bienvenue sur le tableau de bord administrateur" style="-fx-font-size: 24px; -fx-font-weight: bold;"/>
                    
                    <HBox spacing="20" alignment="CENTER">
                        <VBox alignment="CENTER" spacing="10" style="-fx-background-color: #e6f7ff; -fx-padding: 20px; -fx-background-radius: 5px;">
                            <Text text="Utilisateurs" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
                            <Text fx:id="userCountText" text="0" style="-fx-font-size: 24px;"/>
                            <Button text="Gérer" onAction="#handleManageUsers"/>
                        </VBox>
                        
                        <VBox alignment="CENTER" spacing="10" style="-fx-background-color: #e6ffe6; -fx-padding: 20px; -fx-background-radius: 5px;">
                            <Text text="Événements" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
                            <Text fx:id="eventCountText" text="0" style="-fx-font-size: 24px;"/>
                            <Button text="Gérer" onAction="#handleManageEvents"/>
                        </VBox>
                        
                        <VBox alignment="CENTER" spacing="10" style="-fx-background-color: #fff0e6; -fx-padding: 20px; -fx-background-radius: 5px;">
                            <Text text="Réservations" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
                            <Text fx:id="reservationCountText" text="0" style="-fx-font-size: 24px;"/>
                            <Button text="Gérer" onAction="#handleManageReservations"/>
                        </VBox>
                    </HBox>
                </VBox>
            </Tab>
            
            <Tab text="Événements récents">
                <VBox spacing="10">
                    <padding>
                        <Insets top="10" right="10" bottom="10" left="10"/>
                    </padding>
                    
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Text text="Événements récents" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
                        <Pane HBox.hgrow="ALWAYS" />
                        <Button text="Ajouter un événement" onAction="#handleAddEvent"/>
                    </HBox>
                    
                    <TableView fx:id="eventsTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="eventIdColumn" text="ID" prefWidth="50"/>
                            <TableColumn fx:id="eventTitleColumn" text="Titre" prefWidth="150"/>
                            <TableColumn fx:id="eventDateColumn" text="Date" prefWidth="100"/>
                            <TableColumn fx:id="eventStatusColumn" text="Statut" prefWidth="100"/>
                            <TableColumn fx:id="eventActionsColumn" text="Actions" prefWidth="150"/>
                        </columns>
                    </TableView>
                </VBox>
            </Tab>
            
            <Tab text="Utilisateurs">
                <VBox spacing="10">
                    <padding>
                        <Insets top="10" right="10" bottom="10" left="10"/>
                    </padding>
                    
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Text text="Liste des utilisateurs" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
                        <Pane HBox.hgrow="ALWAYS" />
                        <TextField fx:id="userSearchField" promptText="Rechercher un utilisateur" prefWidth="200"/>
                        <Button text="Ajouter un utilisateur" onAction="#handleAddUser"/>
                    </HBox>
                    
                    <TableView fx:id="usersTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="userIdColumn" text="ID" prefWidth="50"/>
                            <TableColumn fx:id="userNameColumn" text="Nom" prefWidth="150"/>
                            <TableColumn fx:id="userEmailColumn" text="Email" prefWidth="200"/>
                            <TableColumn fx:id="userRoleColumn" text="Rôle" prefWidth="100"/>
                            <TableColumn fx:id="userActionsColumn" text="Actions" prefWidth="150"/>
                        </columns>
                    </TableView>
                </VBox>
            </Tab>
        </TabPane>
    </center>
    
    <bottom>
        <HBox alignment="CENTER_RIGHT" spacing="10" style="-fx-background-color: #f0f0f0; -fx-padding: 5px;">
            <Text text="© 2025 - Tous droits réservés" />
        </HBox>
    </bottom>
    
</BorderPane>
